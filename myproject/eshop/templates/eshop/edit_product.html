{% extends 'eshop/base.html' %}

{% block content %}
    <h1>Изменение товара</h1>
    
    <div style="margin-top: 20px;">
        <form method="post" enctype="multipart/form-data" style="max-width: 700px;">
            {% csrf_token %}
            
            <div style="margin-bottom: 20px;">
                <label for="name" style="display: block; margin-bottom: 5px; font-weight: bold;">Название товара</label>
                <input type="text" id="name" name="name" required value="{{ product.name }}" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="category" style="display: block; margin-bottom: 5px; font-weight: bold;">Категория</label>
                <select id="category" name="category" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="">Выберите категорию</option>
                    <option value="electronics" {% if product.category == 'Электроника' %}selected{% endif %}>Электроника</option>
                    <option value="clothing" {% if product.category == 'Одежда' %}selected{% endif %}>Одежда</option>
                    <option value="home" {% if product.category == 'Для дома' %}selected{% endif %}>Для дома</option>
                </select>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="price" style="display: block; margin-bottom: 5px; font-weight: bold;">Цена</label>
                <input type="number" id="price" name="price" min="0" step="0.01" required value="{{ product.price }}" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="description" style="display: block; margin-bottom: 5px; font-weight: bold;">Описание товара</label>
                <textarea id="description" name="description" rows="5" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">{{ product.description }}</textarea>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Текущее изображение</label>
                <img src="{{ product.image }}" alt="{{ product.name }}" style="max-width: 200px; border-radius: 5px; margin-bottom: 10px;">
                
                <label for="image" style="display: block; margin-bottom: 5px; font-weight: bold;">Новое изображение (необязательно)</label>
                <input type="file" id="image" name="image" accept="image/*" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <p style="margin-top: 5px; color: #666; font-size: 0.9rem;">Оставьте пустым, чтобы сохранить текущее изображение</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <label for="stock" style="display: block; margin-bottom: 5px; font-weight: bold;">Количество на складе</label>
                <input type="number" id="stock" name="stock" min="0" required value="10" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div style="margin-top: 30px; display: flex; gap: 15px;">
                <button type="submit" class="btn">Сохранить изменения</button>
                <a href="{% url 'product_detail' product.id %}" style="padding: 8px 16px; text-decoration: none; border: 1px solid #ddd; border-radius: 4px; color: #333;">Отмена</a>
            </div>
        </form>
    </div>
{% endblock %} 